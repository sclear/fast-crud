import{t as me,b as W,d as X,N as ve,E as ne,_ as ae,U as ue,u as J,D as pe,L as ye,w as be,x as Ee}from"./index.545a70b3.js";import{W as ge,I as j,aL as Ce,a0 as Te,a3 as G,a6 as Se,q,aQ as ke,a7 as ie,P as Z,t as F,aP as Q,aN as De,aR as he,aO as we,ao as V,d as x,c as E,F as M,aM as Me,s as ee,x as $,o as O,e as U,f as z,A,g as o,G as Le,w as R,z as K,D as Ae,E as P,B as Ie,C as Be,_ as Ne,aE as Re,r as S,a8 as Oe,aS as $e,v as Ye,X as _e,aT as oe,R as ze,y as de,L as He,V as xe,av as Ve,T as Ue,aF as Xe,H as Ge,J as te,b as le}from"./index.d2ffc00c.js";import{h as Fe,i as Ke,a as Pe,C as We,E as se}from"./index.7550fc04.js";const je=(...e)=>t=>{e.forEach(s=>{ge(s)?s(t):s.value=t})};var H=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(H||{});const re=Symbol("dialogInjectionKey"),qe=(e,t,s)=>{let r={offsetX:0,offsetY:0};const f=a=>{const c=a.clientX,y=a.clientY,{offsetX:u,offsetY:m}=r,l=e.value.getBoundingClientRect(),i=l.left,h=l.top,I=l.width,B=l.height,L=document.documentElement.clientWidth,p=document.documentElement.clientHeight,T=-i+u,g=-h+m,C=L-i-I+u,b=p-h-B+m,N=k=>{const D=Math.min(Math.max(u+k.clientX-c,T),C),Y=Math.min(Math.max(m+k.clientY-y,g),b);r={offsetX:D,offsetY:Y},e.value.style.transform=`translate(${G(D)}, ${G(Y)})`},d=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",d)},v=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",f)},n=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",f)};j(()=>{Ce(()=>{s.value?v():n()})}),Te(()=>{n()})},Je=e=>{Se(e)||me("[useLockscreen]","You need to pass a ref param to this function");const t=q("popup"),s=ke(()=>t.bm("parent","hidden"));if(!ie||Z(document.body,s.value))return;let r=0,f=!1,v="0",n=0;const a=()=>{we(document.body,s.value),f&&(document.body.style.paddingRight=v)};F(e,c=>{if(!c){a();return}f=!Z(document.body,s.value),f&&(v=document.body.style.paddingRight,n=Number.parseInt(Q(document.body,"paddingRight"),10)),r=Fe(t.namespace.value);const y=document.documentElement.clientHeight<document.body.scrollHeight,u=Q(document.body,"overflowY");r>0&&(y||u==="scroll")&&f&&(document.body.style.paddingRight=`${n+r}px`),De(document.body,s.value)}),he(()=>a())},ce=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let t=!1,s=!1;return{onClick:n=>{t&&s&&e(n),t=s=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},Ze=W({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:X([String,Array,Object])},zIndex:{type:X([String,Number])}}),Qe={click:e=>e instanceof MouseEvent};var eo=x({name:"ElOverlay",props:Ze,emits:Qe,setup(e,{slots:t,emit:s}){const r=q("overlay"),f=c=>{s("click",c)},{onClick:v,onMousedown:n,onMouseup:a}=ce(e.customMaskEvent?void 0:f);return()=>e.mask?E("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:v,onMousedown:n,onMouseup:a},[M(t,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):Me("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(t,"default")])}});const oo=eo,fe=W({center:{type:Boolean,default:!1},closeIcon:{type:Ke,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),to={close:()=>!0},lo=["aria-label"],so=["id"],no={name:"ElDialogContent"},ao=x({...no,props:fe,emits:to,setup(e){const t=e,{t:s}=Pe(),{Close:r}=We,{dialogRef:f,headerRef:v,bodyId:n,ns:a,style:c}=ee(re),{focusTrapRef:y}=ee(ve),u=je(y,f),m=$(()=>t.draggable);return qe(f,v,m),(l,i)=>(O(),U("div",{ref:o(u),class:A([o(a).b(),o(a).is("fullscreen",l.fullscreen),o(a).is("draggable",o(m)),{[o(a).m("center")]:l.center},l.customClass]),style:Ie(o(c)),tabindex:"-1",onClick:i[1]||(i[1]=Be(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:v,class:A(o(a).e("header"))},[M(l.$slots,"header",{},()=>[z("span",{role:"heading",class:A(o(a).e("title"))},Le(l.title),3)]),l.showClose?(O(),U("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:A(o(a).e("headerbtn")),type:"button",onClick:i[0]||(i[0]=h=>l.$emit("close"))},[E(o(ne),{class:A(o(a).e("close"))},{default:R(()=>[(O(),K(Ae(l.closeIcon||o(r))))]),_:1},8,["class"])],10,lo)):P("v-if",!0)],2),z("div",{id:o(n),class:A(o(a).e("body"))},[M(l.$slots,"default")],10,so),l.$slots.footer?(O(),U("footer",{key:0,class:A(o(a).e("footer"))},[M(l.$slots,"footer")],2)):P("v-if",!0)],6))}});var uo=ae(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const io=W({...fe,appendToBody:{type:Boolean,default:!1},beforeClose:{type:X(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ue]:e=>Ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},co=(e,t)=>{const r=_e().emit,{nextZIndex:f}=Re();let v="";const n=J(),a=J(),c=S(!1),y=S(!1),u=S(!1),m=S(e.zIndex||f());let l,i;const h=Oe("namespace",$e),I=$(()=>{const w={},_=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(w[`${_}-margin-top`]=e.top),e.width&&(w[`${_}-width`]=G(e.width))),w});function B(){r("opened")}function L(){r("closed"),r(ue,!1),e.destroyOnClose&&(u.value=!1)}function p(){r("close")}function T(){i==null||i(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=oe(()=>N(),e.openDelay):N()}function g(){l==null||l(),i==null||i(),e.closeDelay&&e.closeDelay>0?{stop:i}=oe(()=>d(),e.closeDelay):d()}function C(){function w(_){_||(y.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(w):g()}function b(){e.closeOnClickModal&&C()}function N(){!ie||(c.value=!0)}function d(){c.value=!1}function k(){r("openAutoFocus")}function D(){r("closeAutoFocus")}e.lockScroll&&Je(c);function Y(){e.closeOnPressEscape&&C()}return F(()=>e.modelValue,w=>{w?(y.value=!1,T(),u.value=!0,r("open"),m.value=e.zIndex?m.value++:f(),Ye(()=>{t.value&&(t.value.scrollTop=0)})):c.value&&g()}),F(()=>e.fullscreen,w=>{!t.value||(w?(v=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=v)}),j(()=>{e.modelValue&&(c.value=!0,u.value=!0,T())}),{afterEnter:B,afterLeave:L,beforeLeave:p,handleClose:C,onModalClick:b,close:g,doClose:d,onOpenAutoFocus:k,onCloseAutoFocus:D,onCloseRequested:Y,titleId:n,bodyId:a,closed:y,style:I,rendered:u,visible:c,zIndex:m}},fo=["aria-label","aria-labelledby","aria-describedby"],mo={name:"ElDialog"},vo=x({...mo,props:io,emits:ro,setup(e,{expose:t}){const s=e,r=ze();pe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!r.title));const f=q("dialog"),v=S(),n=S(),a=S(),{visible:c,titleId:y,bodyId:u,style:m,rendered:l,zIndex:i,afterEnter:h,afterLeave:I,beforeLeave:B,handleClose:L,onModalClick:p,onOpenAutoFocus:T,onCloseAutoFocus:g,onCloseRequested:C}=co(s,v);de(re,{dialogRef:v,headerRef:n,bodyId:u,ns:f,rendered:l,style:m});const b=ce(p),N=$(()=>s.draggable&&!s.fullscreen);return t({visible:c,dialogContentRef:a}),(d,k)=>(O(),K(Xe,{to:"body",disabled:!d.appendToBody},[E(Ue,{name:"dialog-fade",onAfterEnter:o(h),onAfterLeave:o(I),onBeforeLeave:o(B),persisted:""},{default:R(()=>[He(E(o(oo),{"custom-mask-event":"",mask:d.modal,"overlay-class":d.modalClass,"z-index":o(i)},{default:R(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":d.title||void 0,"aria-labelledby":d.title?void 0:o(y),"aria-describedby":o(u),class:A(`${o(f).namespace.value}-overlay-dialog`),onClick:k[0]||(k[0]=(...D)=>o(b).onClick&&o(b).onClick(...D)),onMousedown:k[1]||(k[1]=(...D)=>o(b).onMousedown&&o(b).onMousedown(...D)),onMouseup:k[2]||(k[2]=(...D)=>o(b).onMouseup&&o(b).onMouseup(...D))},[E(o(ye),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(T),onFocusAfterReleased:o(g),onReleaseRequested:o(C)},{default:R(()=>[o(l)?(O(),K(uo,{key:0,ref_key:"dialogContentRef",ref:a,"custom-class":d.customClass,center:d.center,"close-icon":d.closeIcon,draggable:o(N),fullscreen:d.fullscreen,"show-close":d.showClose,title:d.title,onClose:o(L)},Ve({header:R(()=>[d.$slots.title?M(d.$slots,"title",{key:1}):M(d.$slots,"header",{key:0,close:o(L),titleId:o(y),titleClass:o(f).e("title")})]),default:R(()=>[M(d.$slots,"default")]),_:2},[d.$slots.footer?{name:"footer",fn:R(()=>[M(d.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):P("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,fo)]),_:3},8,["mask","overlay-class","z-index"]),[[xe,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var po=ae(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=be(po);const Co=x({props:{title:{type:String},confirm:{type:Function},cancel:{type:Function},width:{type:Number},elProps:{type:Object},disabled:{type:Boolean,default:()=>!1}},emits:{valid:()=>{}},setup(e,t){const{width:s,elProps:r,title:f,confirm:v,cancel:n,disabled:a}=e,c=S(""),y=S(!1),u=S(!1),m=S(!1),l=t.slots;let i=S(null);j(()=>{});function h(){var p,T,g,C;if(m.value=!0,i.value){(T=(p=i.value)==null?void 0:p.exposed)!=null&&T.validate&&((C=(g=i.value)==null?void 0:g.exposed)==null||C.validate(b=>{b||b===void 0?(m.value=!1,u.value=!1):m.value=!1}));return}if(v){v(b=>{b||b===void 0?(m.value=!1,u.value=!1):m.value=!1});return}m.value=!1,u.value=!1}function I(){var p,T,g,C;i.value&&(T=(p=i.value)==null?void 0:p.exposed)!=null&&T.validate&&((C=(g=i.value)==null?void 0:g.exposed)==null||C.reset())}const B={header:()=>E("div",null,[E("div",{class:"dialog-header"},[E("span",null,[c.value||e.title||"\u6807\u9898"]),E("div",{onClick:()=>{u.value=!1,m.value=!1}},[E(ne,null,{default:()=>[E(Ee,{class:"pointer"},null)]})])])]),footer:()=>y.value||e.disabled?"":E(te,null,[E(se,{onClick:()=>{n&&n(),I(),u.value=!1}},{default:()=>[le("\u53D6\u6D88")]}),E(se,{type:"primary",onClick:h,loading:m.value},{default:()=>[le("\u786E\u5B9A")]})])};t.expose({open(p={}){c.value=p.title||"",y.value=p.disabled||!1,u.value=!0}});const L=$(()=>y.value||e.disabled);return de("renderDialog",{setFormInstance(p){console.log(i),i.value=p},disabled:L}),()=>E(te,null,[E(yo,Ge(r,{"destroy-on-close":!0,modelValue:u.value,"onUpdate:modelValue":p=>u.value=p,width:s,"append-to-body":!0,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}),{default:()=>[l.default&&l.default()||""],...B})])}});export{Co as D};
